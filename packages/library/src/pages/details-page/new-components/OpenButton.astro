---
import Icon from "../../../components/Icon"
import { getMediaItem } from "../../../content/get-media-items"
import { useTranslate } from "../../../i18n/use-translate"
import { createContentMetadata } from "../utils/create-content-metadata"

interface Props {
  slug: string
}
const { slug } = Astro.props
const item = await getMediaItem(slug)
const content = createContentMetadata(item.data.content[0])

const t = useTranslate(Astro.currentLocale)
const text = content.canBeOpened
  ? t(content.openLabel)
  : t(content.downloadLabel)
---

<a
  class="mt-10 flex min-w-52 items-center justify-center gap-2 rounded-xl bg-gray-800 px-6 py-3 font-bold text-gray-100 hover:bg-gray-700 hover:text-gray-50"
  href={content.url}
  target={content.target}
  hreflang={item.data.language}
>
  {text}
  {
    content.isExternal && (
      <Icon
        ariaLabel={t("ln.common.a11y.external-link")}
        className={`mdi--external-link shrink-0`}
      />
    )
  }
</a>
