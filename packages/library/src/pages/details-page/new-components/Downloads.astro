---
import { getMediaItem } from "../../../content/get-media-items"
import { isExternalUrl } from "../../../utils/urls"

interface Props {
  slug: string
}

const item = await getMediaItem(Astro.props.slug)

const knownExtensions = new Set([
  "pdf",
  "epub",
  "png",
  "jpg",
  "mp3",
  "mp4",
  "doc",
  "docx",
  "ppt",
  "pptx",
])

const content = item.data.content.map(({ url, name }) => {
  const lastUrlPart = url.split("/").slice(-1)[0]
  let extension = lastUrlPart.split(".").slice(-1)[0]
  extension = extension === lastUrlPart ? "" : extension
  const isExternal = isExternalUrl(url)

  return {
    extension,
  }
})
---
