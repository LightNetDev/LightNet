---
import Icon from "../../../../components/Icon"
import { getMediaItem } from "../../../../content/get-media-items"
import { useTranslate } from "../../../../i18n/use-translate"
import { createContentMetadata } from "../../utils/create-content-metadata"

interface Props {
  slug: string
}

const item = await getMediaItem(Astro.props.slug)

const { content } = item.data
if (!content.length) {
  return
}

const contentMetadata = createContentMetadata(content[0])

// Only show the download button action when content can be opened and downloaded
if (!(contentMetadata.canBeOpened && contentMetadata.canBeDownloaded)) {
  return
}

const t = useTranslate(Astro.currentLocale)
---

<a
  download
  href={contentMetadata.url}
  class="flex items-center justify-center gap-2 rounded-2xl bg-gray-200 px-4 py-2 text-xs font-bold uppercase text-gray-600 shadow-sm hover:bg-gray-300"
  ><Icon className="mdi--download" />{t("ln.details.download")}</a
>
