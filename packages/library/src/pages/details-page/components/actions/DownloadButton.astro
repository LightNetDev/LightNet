---
import { getMediaItem } from "../../../../content/get-media-items"
import { useTranslate } from "../../../../i18n/use-translate"
import { createContentMetadata } from "../../utils/create-content-metadata"
import ActionButton from "./ActionButton.astro"

interface Props {
  slug: string
}

const item = await getMediaItem(Astro.props.slug)

const { content } = item.data
if (!content.length) {
  return
}

const contentMetadata = createContentMetadata(content[0])

// Only show the download button action when content can be opened and downloaded
if (!(contentMetadata.canBeOpened && contentMetadata.canBeDownloaded)) {
  return
}

const t = useTranslate(Astro.currentLocale)
---

<ActionButton
  icon="mdi--download"
  download
  href={contentMetadata.url}
  text={t("ln.details.download")}
/>
