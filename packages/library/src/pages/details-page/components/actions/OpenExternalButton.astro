---
import { getMediaItem } from "../../../../content/get-media-items"
import { useTranslate } from "../../../../i18n/use-translate"
import { createContentMetadata } from "../../utils/create-content-metadata"
import ActionButton from "./ActionButton.astro"

interface Props {
  slug: string
  openActionLabel: string
}

const { slug, openActionLabel } = Astro.props

const item = await getMediaItem(slug)

const { content } = item.data
if (!content.length) {
  return
}

const contentMetadata = createContentMetadata(content[0])

// Only show the open button action when content can be opened and is external
if (!(contentMetadata.canBeOpened && contentMetadata.isExternal)) {
  return
}

const t = useTranslate(Astro.currentLocale)
---

<ActionButton
  href={contentMetadata.url}
  target="_blank"
  text={t(openActionLabel ?? "ln.details.open")}
  icon="mdi--external-link"
/>
