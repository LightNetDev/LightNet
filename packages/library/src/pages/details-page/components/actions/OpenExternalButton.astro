---
import Icon from "../../../../components/Icon"
import { getMediaItem } from "../../../../content/get-media-items"
import { useTranslate } from "../../../../i18n/use-translate"
import { createContentMetadata } from "../../utils/create-content-metadata"

interface Props {
  slug: string
  openActionLabel: string
}

const { slug, openActionLabel } = Astro.props

const item = await getMediaItem(slug)

const { content } = item.data
if (!content.length) {
  return
}

const contentMetadata = createContentMetadata(content[0])

// Only show the open button action when content can be opened and is external
if (!(contentMetadata.canBeOpened && contentMetadata.isExternal)) {
  return
}

const t = useTranslate(Astro.currentLocale)
---

<a
  href={contentMetadata.url}
  target="_blank"
  class="flex items-center justify-center gap-2 rounded-2xl bg-gray-200 px-4 py-2 text-xs font-bold uppercase text-gray-600 shadow-sm hover:bg-gray-300"
  ><Icon className="mdi--external-link" />{
    t(openActionLabel ?? "ln.details.open")
  }</a
>
