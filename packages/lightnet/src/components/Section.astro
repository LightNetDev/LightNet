---
import Icon from "./Icon"

export interface Props {
  /**
   * Id to set to the section element.
   * For example this can be used to reference it inside anchors.
   */
  id?: string
  /**
   * Maximum width of the section container. This limits how wide the section grows
   * on bigger screens. After reaching this width the section will be centered horizontally.
   *
   * - "wide" (1280 px) is the maximum homepage width.
   * - "narrow" (768 px) is the maximum details page width. Optimized for good text readability.
   *
   * @default "wide"
   */
  maxWidth?: "wide" | "narrow"
  /**
   * Gap to the component above.
   *
   * @default "lg"
   */
  marginTop?: "sm" | "lg" | "none"
  /**
   * Title on top of the section.
   */
  title?: string
  /**
   * A link to add to the section title. This link can be used to show
   * more content related to the section.
   *
   * The link will not be transformed. You need to make sure to prepend the current locale.
   */
  titleHref?: string
  /**
   * Css classes to set to the section element.
   */
  className?: string
  /**
   * Css classes to set to the title element.
   */
  titleClass?: string
}

const {
  id,
  maxWidth = "wide",
  marginTop = "lg",
  titleHref,
  title,
  className,
  titleClass,
} = Astro.props

const maxWidths = {
  wide: "max-w-screen-xl",
  narrow: "max-w-screen-md",
}

const marginTopValues = {
  none: "",
  sm: "mt-16 md:mt-20",
  lg: "mt-24 md:mt-28",
}
---

<section
  class="mx-auto px-4 md:px-8"
  class:list={[maxWidths[maxWidth], marginTopValues[marginTop], className]}
  id={id}
  aria-label={title}
>
  {
    title && (
      <h2
        class="mb-10 text-balance text-2xl font-bold text-gray-700 sm:mb-12 sm:text-3xl"
        class:list={[titleClass]}
      >
        {titleHref ? (
          <a href={titleHref} class="group flex items-center">
            {title}
            <Icon
              className="mdi--chevron-right group-hover:text-primary transition-colors ease-in-out duration-75 text-4xl sm:text-5xl -ms-2"
              ariaLabel=""
              flipIcon={Astro.locals.i18n.direction === "rtl"}
            />
          </a>
        ) : (
          <>{title}</>
        )}
      </h2>
    )
  }
  <slot />
</section>
