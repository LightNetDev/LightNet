---
import config from "virtual:lightnet/config"

import Icon from "../../../../components/Icon"

interface Props {
  mediaId: string
}

const { mediaId } = Astro.props
---

<a
  class="hidden cursor-pointer items-center gap-2 font-bold text-gray-700 underline"
  id="edit-btn"
  data-admin-enabled={config.experimental?.admin?.enabled}
  href={`/${Astro.currentLocale}/admin/media/edit?id=${mediaId}`}
  ><Icon className="mdi--square-edit-outline" ariaLabel="" />
  {Astro.locals.i18n.t("ln.admin.edit")}</a
>
<script>
  const btn: HTMLAnchorElement | null = document.querySelector("#edit-btn")
  const showEditButton =
    btn?.dataset.adminEnabled === "true" &&
    (import.meta.env.DEV || localStorage.getItem("ln-admin-enabled") === "true")
  if (showEditButton) {
    btn?.classList.remove("hidden")
    btn?.classList.add("flex")
  }
</script>
