---
import Icon from "../../../../components/Icon"
import Toast from "../../../../components/Toast"

interface Props {
  className?: string
}
---

<button
  class="flex cursor-pointer items-center gap-2 font-bold text-gray-700 underline"
  class:list={[Astro.props.className]}
  id="share-btn"
  ><Icon className="mdi--share" ariaLabel="" />
  {Astro.locals.i18n.t("ln_detailsShare")}</button
>
<Toast id="share-success" variant="success">
  {Astro.locals.i18n.t("ln_shareUrlCopiedToClipboard")}
</Toast>
<script>
  import { showToastById } from "../../../../components/showToast"

  const btn = document.querySelector("#share-btn")
  const toastId = "share-success"

  btn?.addEventListener("click", () => {
    if (navigator.share) {
      navigator
        .share({
          url: window.location.href,
        })
        .catch((e) => console.debug("Could not share", e))
    } else {
      navigator.clipboard
        .writeText(window.location.href)
        .then(() => {
          showToastById(toastId)
        })
        .catch((error) => console.log("Error copying URL to clipboard:", error))
    }
  })
</script>
