---
import { getMediaItem } from "../../content/get-media-items"
import ContentSection from "./components/ContentSection.astro"
import DescriptionSection from "./components/DescriptionSection.astro"
import AudioPlayer from "./components/main-details/AudioPlayer.astro"
import ShareButton from "./components/main-details/ShareButton.astro"
import MainDetailsSection from "./components/MainDetailsSection.astro"
import MediaCollectionsSection from "./components/MediaCollectionsSection.astro"
import MoreDetailsSection from "./components/MoreDetailsSection.astro"

export type Props = {
  mediaId: string
}

const { mediaId } = Astro.props
const audioSrc = (await getMediaItem(mediaId)).data.content[0].url
---

<MainDetailsSection mediaId={mediaId}>
  <AudioPlayer src={audioSrc} className="mt-10 w-full" />
  <ShareButton className="mt-4 min-w-40" />
</MainDetailsSection>
<DescriptionSection mediaId={mediaId} />
<ContentSection mediaId={mediaId} />
<MediaCollectionsSection mediaId={mediaId} />
<MoreDetailsSection mediaId={mediaId} />
